---
import {
  render,
  getCollection,
  type CollectionEntry,
  getEntries,
} from "astro:content";
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";

export async function getStaticPaths() {
  const posts = await getCollection("projects");
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await render(post);

const progressPosts = await getEntries(post.data.progress);
---

<Content />

<ul>
  {
    progressPosts.length > 0 ? (
      progressPosts.map((progress) => (
        <li class="capitalize">
          <a
            href={`/blog/${progress.id}`}
            title={`View Progress from "${progress.data.title}"`}
          >
            {progress.data.title}
          </a>
        </li>
      ))
    ) : (
      <li>No progress featured.</li>
    )
  }
</ul>
